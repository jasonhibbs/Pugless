function debounce(t,e,i,a,s){var n,o;return function(){var r=this,c=arguments,d=function(){n=null,i||t.apply(r,c),o=window.setTimeout(function(){$("html").removeClass(a)},s)},u=i&&!n;clearTimeout(n),clearTimeout(o),n=window.setTimeout(d,e),$("html").addClass(a),u&&t.apply(r,c)}}function initARIA(){initARIAButtons(),initARIAPressers(),initARIACheckers(),initARIATablists(),initARIAExpanders()}function initARIAButtons(){$(document).on("keydown",'a[role="button"]',function(t){var e=$(this);32==t.keyCode&&e.not(":disabled").not(".disabled").is(":focus")&&$(this).click()})}function initARIAPressers(t){$(t||"[aria-pressed]").click(function(){var t=$(this),e=t.attr("aria-pressed");"false"==e?t.attr("aria-pressed",!0):t.attr("aria-pressed",!1)})}function initARIACheckers(t){$(t||"[aria-checked]").click(function(){var t=$(this),e=t.attr("aria-checked");"false"==e?t.attr("aria-checked",!0):t.attr("aria-checked",!1)})}function initARIATablists(t){$(t||'[role="tablist"]').each(function(){function t(t){var e=$(t),s=$("#"+e.attr("aria-controls"));i.removeAttr("aria-selected"),a.attr("aria-hidden",!0),e.attr("aria-selected",!0),s.removeAttr("aria-hidden")}var e=$(this),i=e.find("[aria-controls]"),a=$("#"+i.first().attr("aria-controls"));i.each(function(t){if(!t)return!0;var e=$(this);e.removeAttr("href");var i=$("#"+e.attr("aria-controls"));a=a.add(i)}),i.click(function(e){e.preventDefault(),t(this)}),i.keydown(function(e){switch(e.which){case 32:t(this)}})})}function initARIAExpanders(t){$(t||"[aria-expanded][aria-controls]").each(function(){function t(t){"true"===t?(s.removeAttr("aria-hidden"),i.attr("aria-expanded",!0)):(s.attr("aria-hidden",!0),i.attr("aria-expanded",!1))}function e(){var e=i.attr("aria-expanded");t("false"===e?"true":"false")}var i=$(this),a=i.attr("aria-controls"),s=$("#"+a);t(i.attr("aria-expanded")),i.click(function(){e()}),i.keydown(function(t){switch(t.which){case 13:case 32:case 38:case 40:e()}})})}$(function(){var t=$("iframe[src^='http://player.vimeo.com'], iframe[src^='http://www.youtube.com'], object, embed"),e=$("figure");t.each(function(){$(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")}),$(window).resize(function(){var i=e.width();t.each(function(){var t=$(this);t.width(i).height(i*t.attr("data-aspectRatio"))})}).resize()}),/* jquery.keyboard-focus.js (defines classes for when focus was obtained via the keyboard)
 * @author Andrew Ramsden
 * @see http://irama.org/web/dhtml/key-focus/
 * @license Common Public License Version 1.0 <http://www.opensource.org/licenses/cpl1.0.txt>
 * @requires jQuery (tested with version 1.3.1) <http://jquery.com/>
 */
jQuery.keyFocus={},jQuery.keyFocus.conf={keyFocusClass:"focus_keys",mouseFocusClass:"focus_mouse",focusClass:"focus_both",mouseTimeout:50},function($){$(document).ready(function(){$("body").trackFocus()}),$.fn.trackFocus=function(){$(this).data("last-device-used",""),$(this).bind("mousedown",function(t){$(this).data("last-device-used","mouse"),$(this).data("last-device-used-when",(new Date).getTime())}).bind("keydown",function(t){$(this).data("last-device-used","keyboard")}).bind("focusin",function(t){"mouse"!=$(this).data("last-device-used")||(new Date).getTime()-50>$(this).data("last-device-used-when")?$(t.target).addClass($.keyFocus.conf.keyFocusClass):$(t.target).addClass($.keyFocus.conf.mouseFocusClass),$(t.target).addClass($.keyFocus.conf.focusClass)}).bind("focusout",function(t){$("."+$.keyFocus.conf.keyFocusClass+", ."+$.keyFocus.conf.mouseFocusClass).removeClass($.keyFocus.conf.keyFocusClass+" "+$.keyFocus.conf.mouseFocusClass),$(t.target).removeClass($.keyFocus.conf.focusClass)})}}(jQuery),initARIA(),String.prototype.classify=function(){return this.trim().toLowerCase().replace(/\s/g,"_")};var $window=$(window),window_width=$window.width();$window.resize(function(){window_width=$window.width()});var $grid=$(".grid_preview");$(document).click(function(){$grid.is(":hidden")?$grid.removeAttr("aria-hidden"):$grid.attr("aria-hidden",!0)});